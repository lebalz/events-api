//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table users {
  id String [pk]
  email String [unique, not null]
  untis untis_teachers
  untisId Int [unique]
  firstName String [not null]
  lastName String [not null]
  role Role [not null, default: 'USER']
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  events events [not null]
  icsLocator String
  jobs jobs [not null]
  eventGroups user_event_groups [not null]
}

Table events {
  id String [pk]
  author users [not null]
  authorId String [not null]
  start DateTime [not null]
  end DateTime [not null]
  location String [not null, default: '']
  description String [not null, default: '']
  descriptionLong String [not null, default: '']
  state EventState [not null, default: 'DRAFT']
  cloned Boolean [not null, default: false]
  job jobs
  jobId String
  parent events
  parentId String
  children events [not null]
  userGroup user_event_groups
  userGroupId String
  classes String[] [not null]
  classGroups String[] [not null]
  departments departments [not null]
  teachersOnly Boolean [not null, default: false]
  klpOnly Boolean [not null, default: false]
  subjects String[] [not null]
  teachingAffected TeachingAffected [not null, default: 'YES']
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  deletedAt DateTime
}

Table user_event_groups {
  id String [pk]
  name String [not null, default: '']
  description String [not null, default: '']
  user users [not null]
  userId String [not null]
  events events [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
}

Table departments {
  id String [pk]
  name String [unique, not null]
  description String [not null, default: '']
  letter String [not null, default: '']
  classLetters String[] [not null]
  classes untis_classes [not null]
  events events [not null]
  color String [not null, default: '#306cce']
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
}

Table semesters {
  id String [pk]
  name String [not null]
  start DateTime [not null]
  end DateTime [not null]
  untisSyncDate DateTime [not null]
  lessons untis_lessons [not null]
  jobs jobs [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
}

Table registration_periods {
  id String [pk]
  name String [not null]
  start DateTime [not null]
  end DateTime [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
}

Table jobs {
  id String [pk]
  type JobType [not null]
  state JobState [not null, default: 'PENDING']
  user users [not null]
  userId String [not null]
  semester semesters
  semesterId String
  syncDate DateTime
  events events [not null]
  description String [not null, default: '']
  filename String
  log String [not null, default: '']
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
}

Table untis_teachers {
  id Int [pk, increment]
  name String [unique, not null]
  longName String [not null]
  title String [not null]
  active Boolean [not null]
  lessons untis_lessons [not null]
  classes untis_classes [not null]
  user users
}

Table untis_lessons {
  id Int [pk, increment]
  room String [not null]
  subject String [not null]
  description String [not null]
  semesterNr Int [not null]
  year Int [not null]
  weekDay Int [not null]
  startHHMM Int [not null]
  endHHMM Int [not null]
  classes untis_classes [not null]
  teachers untis_teachers [not null]
  semester semesters [not null]
  semesterId String [not null]
}

Table untis_classes {
  id Int [pk, increment]
  name String [unique, not null]
  legacyName String [unique]
  year Int [not null]
  sf String [not null]
  lessons untis_lessons [not null]
  teachers untis_teachers [not null]
  department departments
  departmentId String
}

Table users_untis_view {
  uId String [not null]
  uEmail String [not null]
  cId Int [not null]
  cName String [not null]
  cNameLegacy String [not null]
  lId Int [not null]
  lSubject String [not null]
  lStartHHMM Int [not null]
  lEndHHMM Int [not null]
  lWeekDay Int [not null]
  lSemesterId Int [not null]
  dId String [not null]
  dName String [not null]

  indexes {
    (uId, cId, lId, dId) [unique]
  }
}

Table events_view {
  e_id String [not null]
  start DateTime [not null]
  end DateTime [not null]
  state EventState [not null]
  classes String[] [not null]
  description String [not null]
  class_groups String[] [not null]
  teachers_only Boolean [not null]
  klp_only Boolean [not null]
  subjects String[] [not null]
  department_ids String[] [not null]
  year_s Decimal [not null]
  year_e Decimal [not null]
  start_week_day Decimal [not null]
  end_week_day Decimal [not null]
  start_offset_m Decimal [not null]
  end_offset_m Decimal [not null]
  duration_m Decimal [not null]
  s_id String [not null]

  indexes {
    (s_id, e_id) [unique]
  }

  Note: 'The underlying view does not contain a valid unique identifier and can therefore currently not be handled by the Prisma Client.'
}

Table users_teaching_view {
  lSemesterId Int [unique, not null]
  classIds Int[] [not null]
  classNames String[] [not null]
  legacyClassNames String[] [not null]
  subjects String[] [not null]
  departmentIds String[] [not null]
  departmentNames String[] [not null]
}

Enum Role {
  USER
  ADMIN
}

Enum EventState {
  DRAFT
  REVIEW
  PUBLISHED
  REFUSED
}

Enum TeachingAffected {
  YES
  PARTIAL
  NO
}

Enum JobState {
  PENDING
  ERROR
  DONE
  REVERTED
}

Enum JobType {
  IMPORT
  CLONE
  SYNC_UNTIS
}

Ref: users.untisId - untis_teachers.id

Ref: events.authorId > users.id

Ref: events.jobId > jobs.id [delete: Cascade]

Ref: events.parentId - events.id [delete: Cascade]

Ref: events.userGroupId > user_event_groups.id

Ref: user_event_groups.userId > users.id

Ref: jobs.userId > users.id

Ref: jobs.semesterId > semesters.id

Ref: untis_lessons.semesterId > semesters.id [delete: Cascade]

Ref: untis_classes.departmentId > departments.id